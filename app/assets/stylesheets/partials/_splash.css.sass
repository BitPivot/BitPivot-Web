@import 'partials/mixins'



$total-blinds: 4



.blinds-wrapper
  +position(absolute, $page-header-height, 0, 0, 0)
  background: #000

  +breakpoint('tiny')
    +position(absolute, $page-header-height-tiny, 0, 0, 0)



.blind
  +position(absolute, auto, 0 auto, 0)
  width: 100%
  overflow: hidden
  +drop-shadow-bottom(20px)
  //+transition(height 0.5s ease 0.5s)

  &.expanded
    z-index: 99
    +no-drop-shadow

  &.collapsed
    height: $blind-collapsed-height

    .blind-banner
      opacity: 0

    .blind-content
      opacity: 0

    +breakpoint('tiny')
      height: $blind-collapsed-height-tiny

  header
    +position(relative)
    display: block
    cursor: pointer
    height: $blind-collapsed-height
    line-height: $blind-collapsed-height
    vertical-align: middle
    text-align: center
    +font($blind-collapsed-height - ($margin * 1.25), #fff, 'pragmatica-extra-light')
    text-shadow: 0px 3px 5px rgba(0, 0, 0, 0.5)
    z-index: 100
    +drop-shadow-bottom(20px, rgba(0, 0, 0, 1))

    +breakpoint('tiny')
      height: $blind-collapsed-height-tiny
      line-height: $blind-collapsed-height-tiny
      +font($blind-collapsed-height-tiny - ($margin * 1.05), #fff, 'pragmatica-extra-light')



.blind-banner
  +position(relative)
  height: $blind-banner-height
  background: #000 no-repeat
  +background-size-cover
  +transition(opacity 0.5s ease)

  +breakpoint('narrow')
    height: $blind-banner-height-narrow

  +breakpoint('landscape')
    height: $blind-banner-height-narrow

  +breakpoint('tiny')
    height: $blind-banner-height-tiny

  span
    display: block
    +position(absolute, auto, 0, 0, 0)
    background: #000
    background: rgba(0, 0, 0, 0.5)
    padding: $margin / 2
    text-align: center
    +font(30px, #fff, 'pragmatica-extra-light')

    +breakpoint('tiny')
      +font(17px, #fff, 'pragmatica-extra-light')



.blind-content-area
  +position(absolute, $blind-collapsed-height, 0, 0, 0)
  -webkit-overflow-scrolling: touch
  overflow-y: scroll

  +breakpoint('tiny')
    +position(absolute, $blind-collapsed-height-tiny, 0, 0, 0)



.blind-content
  padding: $margin
  +font($page-font-size, #aaa, 'pragmatica-light')
  line-height: $page-line-height
  +drop-shadow-inner-bottom(50px)

  h1
    +font(20px, #ddd, 'pragmatica-extra-light')
    line-height: 20px
    +h1-border
    +type-pad-bottom

  h2
    +font(17px, #ddd, 'pragmatica-extra-light')
    line-height: 20px
    +h1-border
    +type-pad-bottom

  p
    text-align: justify
    +type-pad-bottom



.row
  width: 100%
  overflow: auto
  margin: 0 0 $margin 0

  &:last-child
    margin: 0

  .column
    +position(relative)
    float: left
    width: 50%
    +box-sizing-border-box

    &:nth-child(odd)
      padding: 0 ($margin / 2) 0 0

    &:nth-child(even)
      padding: 0 0 0 ($margin / 2)

    +breakpoint('tiny')
      width: 100%
      margin: 0 0 $margin 0

      &:nth-child(odd)
        padding: 0

      &:nth-child(even)
        padding: 0

      &:last-child
        margin: 0



=calculate-blind-position($class, $index)
  // Expanded
  .blind#{$class}.expanded
    top: $index * $blind-collapsed-height
    bottom: ($total-blinds - ($index + 1)) * $blind-collapsed-height

  .blind#{$class}.collapsed.top
    top: $index * $blind-collapsed-height
    bottom: auto

  .blind#{$class}.collapsed.bottom
    top: auto
    bottom: ($total-blinds - ($index + 1)) * $blind-collapsed-height



=blind-section($class, $index, $header-color, $banner-image, $image-position)
  .blind#{$class}
    z-index: 100 + ($total-blinds - $index)

  .blind#{$class} header
    +gradient-radial($header-color)

  .blind#{$class} .blind-banner
    background-image: image-url($banner-image)
    background-position: $image-position

  +calculate-blind-position($class, $index)



+blind-section('.our-mission',     0, $blinds-purple-1, 'splash/mission-background.jpg',     70% 50%)
+blind-section('.mobile-presence', 1, $blinds-purple-2, 'splash/mobile-background.jpg',      50% 50%)
+blind-section('.consulting',      2, $blinds-purple-3, 'splash/integration-background.jpg', 50% 50%)
+blind-section('.contact-us',      3, $blinds-purple-4, 'splash/consulting-background.jpg',  50% 50%)