<article class='post'>

  <section class='post-area'>

    <div class='post-header'>
      <% if post.banner_image %>
        <%= image_tag post.banner_image, class: 'blog-banner' %>
      <% end %>

      <hgroup>
        <h1><%= link_to post.title, "/blog/posts/#{post.file_name.slice(0..(post.file_name.index('.')-1))}" %></h1>
        <h2><%= link_to post.subtitle, "/blog/posts/#{post.file_name.slice(0..(post.file_name.index('.')-1))}" %></h2>
      </hgroup>
    </div>

    <div class='post-metadata'>
      By <%= link_to post.author, "/blog/authors/#{post.author.split(' ')[0]}".downcase %>
      on <span class='date'><%= "#{Date::MONTHNAMES[post.month]} #{post.day}, #{post.year}" %></span>
    </div>

    <div class='post-body'>
      <%= render inline: post.body %>
    </div>

  </section>



  <section class='comments-area'>

    <section class='comments'>
      <h1>Discussion</h1>

      <% post.blog_post_comments.all.each do |c| %>
        <div class='comment'>
          <div class='comment-header'>
            Written by <em><%= c.author %></em> on <%= c.created_at.to_formatted_s(:long_ordinal) %>
          </div>
          <div class='comment-content'>
            <%= c.content %>
          </div>

          <% if defined? respond_to_id %>
            <div id='respond' class='respond-to-comment'>
              Respond
            </div>
          <% else %>
            <div class='respond-to-link'>
              <%= link_to 'Click here to reply to this comment', "/blog/respond_to_comment/#{post.id}/#{c.id}#respond", method: 'post' %>
            </div>
          <% end %>
        </div>
      <% end %>
    </section>

    <section class='create-comment'>
      <h1>Contribute to this Article</h1>
      <%= render template: 'blog/create_comment', locals: { post: post } %>
    </section>

  </section>

</article>